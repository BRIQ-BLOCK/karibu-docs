# Karibu-OTP

Welcome to the Karibu OTP API documentation.

## Overview
The OTP API allows you to request, verify, resend, invalidate, and check OTPs for secure authentication. All endpoints require authentication via an `X-API-Key` header.

---

## Security Notes
- All endpoints require a valid `X-API-Key`.
- OTP actions require a valid developer app key and phone number.
- If access is denied, endpoints will return a `403 Forbidden` error.

**Example Error Response:**
```json
{
  "detail": "Access denied."
}
```

---

## Endpoints

### Request OTP
**POST** `/v1/otp/request`
Request an OTP for a phone number and developer app.

**Headers:**
- `X-API-Key` (string, required)

**Request Body:**
```json
{
  "phone_number": "+255712345678",
  "app_key": "devapp_123456",
  "sender_id": "BRIQ OTP",
  "otp_length": 6,
  "minutes_to_expire": 10,
  "delivery_method": "sms",
  "message_template": "Your OTP is {code}"
}
```

**Response:**
```json
{
  "success": true,
  "message": "string",
  "data": {},
  "status_code": 200
}
```

---

### Verify OTP
**POST** `/v1/otp/verify`
Verify an OTP code for a phone number and developer app.

**Headers:**
- `X-API-Key` (string, required)

**Request Body:**
```json
{
  "phone_number": "+255712345678",
  "app_key": "devapp_123456",
  "code": "123456"
}
```

**Response:**
```json
{
  "success": true,
  "message": "string",
  "data": {},
  "status_code": 200
}
```

---

### Resend OTP
**POST** `/v1/otp/resend`
Resend an OTP for a phone number and developer app.

**Headers:**
- `X-API-Key` (string, required)

**Request Body:**
```json
{
  "phone_number": "+255712345678",
  "app_key": "devapp_123456",
  "sender_id": "BRIQ OTP",
  "otp_length": 6,
  "minutes_to_expire": 10,
  "delivery_method": "sms",
  "message_template": "Your OTP is {code}"
}
```

**Response:**
```json
{
  "success": true,
  "message": "string",
  "data": {},
  "status_code": 200
}
```

---

### Invalidate OTP
**POST** `/v1/otp/invalidate`
Invalidate an OTP for a phone number and developer app.

**Headers:**
- `X-API-Key` (string, required)

**Request Body:**
```json
{
  "phone_number": "+255712345678",
  "app_key": "devapp_123456"
}
```

**Response:**
```json
{
  "success": true,
  "message": "string",
  "data": {},
  "status_code": 200
}
```

---

### Check OTP Status
**GET** `/v1/otp/status`
Check the status of an OTP for a phone number and developer app.

**Query Parameters:**
- `phone_number` (string, required)
- `app_key` (string, required)

**Headers:**
- `X-API-Key` (string, required)

**Response:**
```json
{
  "success": true,
  "message": "string",
  "data": {},
  "status_code": 200
}
```

---

### Example Error Responses

**403 Forbidden (Access Denied):**
```json
{
  "detail": "Access denied."
}
```

**422 Validation Error:**
```json
{
  "detail": [
    {
      "loc": ["body", "phone_number"],
      "msg": "field required",
      "type": "value_error.missing"
    }
  ]
}
```
