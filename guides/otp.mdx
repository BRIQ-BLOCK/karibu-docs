---
title: OTP (One-Time Passwords)
description: Implement secure authentication flows with OTP codes delivered via SMS or voice. Learn how to request and verify OTP codes using developer apps.
icon: 'lock'
---

OTP (one-time passwords) are short, time-limited codes sent to a user's phone to confirm identity for sign-in, registration or sensitive actions. In Briq's developer workflow, OTPs are generated and delivered via developer apps and must be requested from workspaces with developer access enabled. Keep codes short-lived and single-use to reduce risk; store only request identifiers and avoid exposing them in client-side logs.

To implement OTP flows create and link a developer app to a workspace with developer access enabled, request an OTP for a phone number, deliver the code (SMS or call) and then verify the code the user submits. Validate phone numbers (E.164) and code formats before calling the API, limit verification attempts, and apply rate limiting on request/resend endpoints. For user experience provide clear instructions, allow reasonable resends, and show remaining expiry time.

Delivery channel choice matters: voice calls often deliver more reliably than SMS in regions with flaky SMS routes or carrier filtering. Consider offering voice as a fallback or primary channel where reliability is critical.

For API details (request, verify, resend, invalidate, status) refer to the Karibu OTP API reference.

## Requirements

### Developer Apps
OTP services can only be accessed through developer apps. You must:
1. Create a developer app
2. Link it to a workspace with `developer_access = true`
3. Use the developer app credentials for OTP requests

### Workspace Configuration
The workspace must have developer access enabled:
```bash
curl -X PATCH https://karibu.briq.tz/v1/workspace/update/ws_abc123xyz789def \
-H "Content-Type: application/json" \
-H "X-API-Key: your_api_key_here" \
-d '{
  "developer_access": true
}'
```

## OTP Workflow

### 1. Request OTP Code

```bash
curl -X POST https://karibu.briq.tz/v1/otp/request/ \
-H "Content-Type: application/json" \
-H "X-API-Key: your_api_key_here" \
-d '{
  "phone_number": "255712345678",
  "developer_app_id": "dev_app_abc123xyz789"
}'
```

**Response:**
```json
{
  "success": true,
  "otp_id": "otp_xyz789abc123def",
  "phone_number": "255712345678", 
  "message": "Your verification code is 123456",
  "sent_at": "2024-08-10T10:30:00Z",
  "expires_at": "2024-08-10T10:35:00Z"
}
```

### 2. Verify OTP Code

```bash
curl -X POST https://karibu.briq.tz/v1/otp/verify/ \
-H "Content-Type: application/json" \
-H "X-API-Key: your_api_key_here" \
-d '{
  "otp_id": "otp_xyz789abc123def",
  "code": "123456",
  "developer_app_id": "dev_app_abc123xyz789"
}'
```

**Response (Success):**
```json
{
  "success": true,
  "otp_id": "otp_xyz789abc123def",
  "verified": true,
  "message": "OTP verified successfully",
  "verified_at": "2024-08-10T10:32:00Z"
}
```

**Response (Failed):**
```json
{
  "success": false,
  "otp_id": "otp_xyz789abc123def", 
  "verified": false,
  "error": "Invalid or expired OTP code"
}
```

---

*For detailed API reference, visit [OTP API](/Karibu-OTP)*
  "error": "Invalid or expired OTP code"
}
```

## Best Practices

### Security
1. **Expire Codes**: Implement reasonable expiration times for OTP codes
2. **Rate Limiting**: Limit OTP requests per phone number to prevent abuse
3. **Secure Storage**: Never store OTP codes in plain text
4. **Input Validation**: Validate phone numbers before requesting OTP

### User Experience  
1. **Clear Instructions**: Provide clear messaging about OTP process
2. **Resend Options**: Allow users to request new codes if needed
3. **Error Handling**: Provide helpful error messages for failed verification
4. **Timeout Feedback**: Show users how long codes remain valid

### Developer Apps
1. **Dedicated Apps**: Create specific developer apps for OTP services
2. **Workspace Linking**: Ensure apps are linked to workspaces with developer access
3. **Credential Security**: Secure developer app credentials appropriately
4. **Access Monitoring**: Monitor and log OTP access patterns

### Integration
1. **Error Recovery**: Implement retry logic for failed requests
2. **Logging**: Log OTP events for monitoring and debugging
3. **Testing**: Use test phone numbers during development
4. **Monitoring**: Track OTP success rates and delivery times

---

*For detailed API reference, visit [OTP API](/Karibu-OTP)*
